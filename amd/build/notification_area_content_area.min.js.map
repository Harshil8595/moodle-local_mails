{"version":3,"sources":["../src/notification_area_content_area.js"],"names":["define","$","Templates","DebugNotification","CustomEvents","NotificationRepo","NotificationAreaEvents","NotificationContentArea","SELECTORS","CONTAINER","CONTENT","HEADER","FOOTER","TOGGLE_MODE","TEMPLATES","ContentArea","root","userId","container","closest","header","find","content","footer","registerEventListeners","prototype","Object","create","constructor","showNotification","notification","headerPromise","render","done","html","setHeaderHTML","bind","contentPromise","setContentHTML","footerPromise","setFooterHTML","when","show","getContainer","trigger","notificationShown","getRoot","events","activate","on","VIEW_TOGGLE","hide","e","clearNotifications"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Controls the content area of the notification area on the\n * notification page.\n *\n * @module     local_mails/notification_area_content_area\n * @class      notification_area_content_area\n * @package    message\n * @copyright  2020 Harshil Patel <harshil8595@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/templates', 'core/notification', 'core/custom_interaction_events',\n        'local_mails/notification_repository', 'local_mails/notification_area_events',\n        'message_popup/notification_area_content_area'],\n    function($, Templates, DebugNotification, CustomEvents, NotificationRepo, NotificationAreaEvents, NotificationContentArea) {\n\n    var SELECTORS = {\n        CONTAINER: '[data-region=\"mails-area\"]',\n        CONTENT: '[data-region=\"content\"]',\n        HEADER: '[data-region=\"header\"]',\n        FOOTER: '[data-region=\"footer\"]',\n        TOGGLE_MODE: '[data-action=\"toggle-mode\"]',\n    };\n\n    var TEMPLATES = {\n        HEADER: 'local_mails/notification_area_content_area_header',\n        CONTENT: 'local_mails/notification_area_content_area_content',\n        FOOTER: 'local_mails/notification_area_content_area_footer',\n    };\n\n    /**\n     * Constructor for the ContentArea\n     *\n     * @param {object} root The root element for the content area\n     * @param {int} userId The user id of the current user\n     */\n    var ContentArea = function(root, userId) {\n        this.root = $(root);\n        this.container = this.root.closest(SELECTORS.CONTAINER);\n        this.userId = userId;\n        this.header = this.root.find(SELECTORS.HEADER);\n        this.content = this.root.find(SELECTORS.CONTENT);\n        this.footer = this.root.find(SELECTORS.FOOTER);\n\n        this.registerEventListeners();\n    };\n\n    /**\n     * Clone the parent prototype.\n     */\n    ContentArea.prototype = Object.create(NotificationContentArea.prototype);\n\n    /**\n     * Make sure the constructor is set correctly.\n     */\n    ContentArea.prototype.constructor = ContentArea;\n\n    /**\n     * Render the given notification context in the content area.\n     *\n     * @method showNotification\n     * @param {object} notification The notification context (from a webservice)\n     * @return {object} jQuery promise\n     */\n    ContentArea.prototype.showNotification = function(notification) {\n        var headerPromise = Templates.render(TEMPLATES.HEADER, notification).done(function(html) {\n            this.setHeaderHTML(html);\n        }.bind(this));\n\n        var contentPromise = Templates.render(TEMPLATES.CONTENT, notification).done(function(html) {\n            this.setContentHTML(html);\n        }.bind(this));\n\n        var footerPromise = Templates.render(TEMPLATES.FOOTER, notification).done(function(html) {\n            this.setFooterHTML(html);\n        }.bind(this));\n\n        return $.when(headerPromise, contentPromise, footerPromise).done(function() {\n            this.show();\n            this.getContainer().trigger(NotificationAreaEvents.notificationShown, [notification]);\n        }.bind(this));\n    };\n\n    /**\n     * Create the event listeners for the content area.\n     *\n     * @method registerEventListeners\n     */\n    ContentArea.prototype.registerEventListeners = function() {\n        CustomEvents.define(this.getRoot(), [\n            CustomEvents.events.activate\n        ]);\n\n        this.getRoot().on(CustomEvents.events.activate, SELECTORS.VIEW_TOGGLE, function() {\n            this.hide();\n        }.bind(this));\n\n        this.getContainer().on(NotificationAreaEvents.showNotification, function(e, notification) {\n            this.showNotification(notification);\n        }.bind(this));\n\n        this.getContainer().on(NotificationAreaEvents.clearNotifications, function() {\n            //this.getRoot().empty();\n        }.bind(this));\n    };\n\n    return ContentArea;\n});\n"],"file":"notification_area_content_area.min.js"}